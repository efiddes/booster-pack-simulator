(this["webpackJsonpbooster-pack-simulator"]=this["webpackJsonpbooster-pack-simulator"]||[]).push([[0],[,,function(e,t,a){e.exports=a.p+"static/media/mtg-back.dd611d53.jpg"},,,,function(e,t,a){e.exports=a(18)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(4),s=a.n(c),i=(a(11),a(12),a(1)),l=Object(n.createContext)(),o=["grn","rna","war","m20","eld"],u=function(e){var t=Object(n.useState)([{rarity:"rare",pageSize:1,isRequested:!0},{rarity:"uncommon",pageSize:3,isRequested:!0},{rarity:"common",pageSize:10,isRequested:!0},{rarity:"basic",pageSize:1,isRequested:!0}]),a=Object(i.a)(t,2),c=a[0],s=a[1],u=Object(n.useState)({set:o[o.length-1],booster:c}),m=Object(i.a)(u,2),d=m[0],f=m[1];return r.a.createElement(l.Provider,{value:{standard:o,booster:c,updateRequested:function(e){var t=c.map((function(t){return t.rarity===e?Object.assign(t,{isRequested:!t.isRequested}):t}));s(t)},boosterPack:d,createBooster:function(e){f({set:e,booster:c})}}},e.children)},m=Object(n.createContext)(),d=function(e){var t=Object(n.useState)(!0),a=Object(i.a)(t,2),c=a[0],s=a[1];return r.a.createElement(m.Provider,{value:{isLoading:c,setIsLoading:s}},e.children)},f=(a(13),function(){var e=Object(n.useContext)(l),t=e.standard,a=e.booster,c=e.updateRequested,s=e.createBooster,o=Object(n.useContext)(m).isLoading,u=Object(n.useState)(t[t.length-1]),d=Object(i.a)(u,2),f=d[0],p=d[1];return r.a.createElement("div",{className:"filters"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),s(f)}},r.a.createElement("h3",null,"Filter Options:"),r.a.createElement("div",{className:"filter-set"},t.map((function(e){return r.a.createElement("label",{key:e,htmlFor:e},r.a.createElement("input",{type:"radio",id:e,name:"sets",value:e,onChange:function(){return p(e)},defaultChecked:f===e}),r.a.createElement("i",{className:"ss ss-"+e+" ss-5x"}))}))),r.a.createElement("ul",{className:"filter-list"},a.map((function(e){return r.a.createElement("li",{key:e.rarity},r.a.createElement("input",{type:"checkbox",name:e.rarity,onChange:function(e){return c(e.target.name)},checked:e.isRequested}),r.a.createElement("label",{htmlFor:e.rarity},e.rarity.charAt(0).toUpperCase()+e.rarity.slice(1)),r.a.createElement("input",{type:"text",name:e.rarity+"-quant",value:e.pageSize,disabled:!0}))}))),r.a.createElement("button",{disabled:o,type:"submit"},"New Booster")))}),p=(a(14),a(15),a(2)),b=a.n(p),h=function(e){var t=e.name,a=e.image,c=e.number,s=Object(n.useState)(!1),l=Object(i.a)(s,2),o=l[0],u=l[1];return r.a.createElement("div",{className:o?"card flipped":"card",onClick:function(){return u(!0)}},r.a.createElement("div",{className:"cardBack"},r.a.createElement("img",{className:o?"image":"image hover",src:b.a,alt:t,number:c})),r.a.createElement("div",{className:"cardFront"},r.a.createElement("img",{className:"image",src:a||b.a,alt:t,number:c})))},g=(a(16),function(){return r.a.createElement("div",{className:"loader"},r.a.createElement("div",{className:"colour-wheel"},r.a.createElement("div",{className:"w-mana"}),r.a.createElement("div",{className:"between"},r.a.createElement("div",{className:"g-mana"}),r.a.createElement("div",{className:"u-mana"})),r.a.createElement("div",{className:"evenly"},r.a.createElement("div",{className:"r-mana"}),r.a.createElement("div",{className:"b-mana"}))),r.a.createElement("p",{className:"loader-caption"},"Sealing Booster"))}),E=a(5),v=a.n(E),y=function(){var e=Object(n.useContext)(l).boosterPack,t=Object(n.useContext)(m).isLoading,a=function(e,t){var a=Object(n.useState)([]),r=Object(i.a)(a,2),c=r[0],s=r[1],l=Object(n.useContext)(m).setIsLoading,o=e.set,u=[];e.booster.filter((function(e){return e.isRequested||0===e.pageSize})).forEach((function(e){for(var t=Object.getOwnPropertyNames(e),a=Object.values(e),n="https://api.magicthegathering.io/v1/cards?set=".concat(o),r=0;r<t.length;r++)if("rare"===a[r])n+="&".concat(t[r],"="),n+=Math.random()>.125?"rare":"mythic";else if("basic"===a[r])n+="&type=".concat(a[r]);else{if("pageSize"===t[r]){n+="&".concat(t[r],"="),a[r]<10?n+=5*a[r]:n+=2*a[r];break}if("isRequested"===t[r])break;n+="&".concat(t[r],"=").concat(a[r])}n+="&random=true&contains=imageUrl",u.push(n)})),Object(n.useEffect)((function(){l(!0),Array.isArray(u)&&u.length&&v.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:Promise.all(u.map((function(e){return fetch(e).then((function(e){if(!e.ok)throw new Error("Failed to fetch.");return e.json()}))}))).then((function(e){s(e),l(!1)})).catch((function(e){console.log(e),l(!1)}));case 1:case"end":return e.stop()}}))}),t);var d=c.map((function(e){return e.cards.filter((function(e){return e.hasOwnProperty("imageUrl")}))})),f=[];return d.forEach((function(e){switch(e[0].rarity){case"Rare":case"Mythic":f.push({cards:e.slice(0,1)});break;case"Uncommon":f.push({cards:e.slice(0,3)});break;case"Common":if(e.filter((function(e){return!e.supertypes.includes("Basic")})).length){f.push({cards:e.filter((function(e){return!e.supertypes.includes("Basic")})).slice(0,10)});break}f.push({cards:e.slice(0,1)});break;default:f.push({cards:e})}})),f}(e,[e]);return r.a.createElement("div",{className:"cards-container"},t?r.a.createElement(g,null):a.map((function(e){return e.cards.map((function(e){return r.a.createElement(h,{key:e.number,name:e.name,image:e.imageUrl,number:e.number})}))})))};var k=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",null,r.a.createElement("h2",null,"Booster Pack Simulator")),r.a.createElement(u,null,r.a.createElement(d,null,r.a.createElement(f,null),r.a.createElement(y,null))),r.a.createElement("footer",null,r.a.createElement("ul",{class:"footer"},r.a.createElement("li",null,"By ",r.a.createElement("b",null,"Ethan Fiddes")),r.a.createElement("li",null,"Built with:",r.a.createElement("img",{className:"react-logo",alt:"built with React",src:"/logo192.png"}),r.a.createElement("a",{href:"https://reactjs.org",target:"_blank"},r.a.createElement("span",{className:"react"},"React"))),r.a.createElement("li",null,"Data provided from ",r.a.createElement("a",{href:"https://docs.magicthegathering.io/",target:"_blank"},"Magic: The Gathering API")))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[6,1,2]]]);
//# sourceMappingURL=main.d27d20f4.chunk.js.map